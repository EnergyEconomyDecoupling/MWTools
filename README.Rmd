---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# MWTools

<!-- badges: start -->

<!-- badges: end -->

The `R` package `MWTools` provides functions for the calculation of human and animal muscle work for use in Societal Exergy Analysis (SEA) using the Physical Supply Use Table (PSUT) framework.

## Installation

You can install the development version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("EnergyEconomyDecoupling/MWTools")
```

## Animal Muscle Work

Raw data for the calculation of animal muscle work is obtained from the Food and Agriculture Organisation of the United Nations Statistical Database (FAOSTAT), via the `R` package `FAOSTAT`. The `MWTools` package provides a wrapper function for downloading data for the number of live animals, `down_fao_live_animals`, which utilises the function `FAOSTAT::get_faostat_bulk()`. Once downloaded `MWTools` provides a number of functions for the calculation of the number of working animals by species, country, year and in agriculture, transport, and in total. The helper function `calc_amw_numbers` returns a tidy data frame containing

```{r example_numbers}
library(MWTools)

amw_numbers_df <- calc_amw_numbers(data_folder = file.path(PFUSetup::get_abs_paths()$project_path, "Data", "FAO Data"))

head(amw_numbers_df)

```

The helper function `calc_amw_pfu` returns a tidy data frame containing data for the primary, final, and useful energy by species, country, year and in agriculture, transport, and in total.

```{r get_example_data}
amw_pfu_df <- calc_amw_pfu(data_folder = file.path(PFUSetup::get_abs_paths()$project_path, "Data", "FAO Data"))

head(amw_pfu_df)

```

Use the `plot_amw_summary` function to produce a plot summarising the animal muscle work data for a particular country and sector.

```{r example_plot, echo=TRUE, fig.height=6, fig.width=7}

plot_amw_summary(amw_pfu_df = amw_pfu_df,
                 amw_numbers_df = amw_numbers_df,
                 country = "CHN",
                 sector = "Total")

```

## Human Muscle Work

Raw data for the calculation of human muscle work is obtained from the International Labor Organisation (ILO), via the `R` package `Rilostat`. The `MWTools` package provides a wrapper function for `Rilostat::get_ilostat` which returns a tidy data frame containing the number of employed persons by sector and sex, and the mean yearly working hours by sector and sex...

```{r example_hmw}

hmw_hours <- get_ilo_hmw_data()

head(hmw_hours)

```
