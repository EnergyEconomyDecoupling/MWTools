<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>MWTools • MWTools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MWTools">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MWTools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.10</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/MWTools.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>MWTools</h1>
            
      

      <div class="d-none name"><code>MWTools.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In societal energy analysis and societal exergy analysis (SEA),
animals and humans provide energy to society by performing <em>muscle
work</em>. A previous study by <a href="https://doi.org/10.1007/s41247-022-00096-z" class="external-link"><span class="citation">Steenwyk et al. (2022)</span></a> developed and
standardized ways to estimate muscle work contributed to society by
animals and humans. And data exist from the UN’s <a href="https://www.fao.org/home/en" class="external-link">Food and Agriculture Organization</a>
(FAO) and the <a href="https://www.ilo.org" class="external-link">International Labor
Organization</a> (ILO) that could be used for such purposes. However,
none of the data are in the PSUT format proposed by <a href="https://doi.org/10.1016/j.apenergy.2018.05.109" class="external-link"><span class="citation">Heun, Owen, and Brockway (2018)</span></a>.
Computational tools are needed to gather and shape relevant data.</p>
<p>The examples below show how to use <code>MWTools</code> to address
the needs described above.</p>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="animal-muscle-work">Animal Muscle Work<a class="anchor" aria-label="anchor" href="#animal-muscle-work"></a>
</h3>
<p>Raw data for the estimation of animal muscle work is obtained from
the Food and Agriculture Organisation of the United Nations Statistical
Database (FAOSTAT), via the <code>R</code> package <code>FAOSTAT</code>
as follows.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raw_amw_data</span> <span class="op">&lt;-</span> <span class="fu">FAOSTAT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/FAOSTAT/man/download_faostat_bulk.html" class="external-link">get_faostat_bulk</a></span><span class="op">(</span>code <span class="op">=</span> <span class="st">"QCL"</span>,  data_folder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The helper function <code>calc_amw_pfu</code> returns a tidy data
frame containing data for the primary, final, and useful energy by
species, country, year and in the agriculture, transport, and total
sectors.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_amw_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu">MWTools</span><span class="fu">::</span><span class="fu"><a href="../reference/amw_test_data_path.html">amw_test_data_path</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">amw_pfu_data</span> <span class="op">&lt;-</span> <span class="fu">MWTools</span><span class="fu">::</span><span class="fu"><a href="../reference/calc_amw_pfu.html">calc_amw_pfu</a></span><span class="op">(</span>.df <span class="op">=</span> <span class="va">test_amw_data</span>,</span>
<span>                                      concordance_path <span class="op">=</span> <span class="fu">MWTools</span><span class="fu">::</span><span class="fu"><a href="../reference/fao_concordance_path.html">fao_concordance_path</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                      amw_analysis_data_path <span class="op">=</span> <span class="fu">MWTools</span><span class="fu">::</span><span class="fu"><a href="../reference/amw_analysis_data_path.html">amw_analysis_data_path</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">amw_pfu_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 2,268</span></span>
<span><span class="co">#&gt; Columns: 7</span></span>
<span><span class="co">#&gt; $ Country <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "CHNM", "CHNM", "CHNM", "CHNM", "CHNM", "CHNM", "CHNM", "CHNM"…</span></span>
<span><span class="co">#&gt; $ Year    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1960, 1960, 1960, 1960, 1960, 1960, 1960, 1960, 1960, 1960, 19…</span></span>
<span><span class="co">#&gt; $ Species <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Asses", "Asses", "Asses", "Asses", "Asses", "Asses", "Buffalo…</span></span>
<span><span class="co">#&gt; $ Stage   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Useful", "Useful", "Final", "Final", "Primary", "Primary", "U…</span></span>
<span><span class="co">#&gt; $ Sector  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Agriculture", "Transport", "Agriculture", "Transport", "Agric…</span></span>
<span><span class="co">#&gt; $ Unit    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "EJ", "EJ", "EJ", "EJ", "EJ", "EJ", "EJ", "EJ", "EJ", "EJ", "E…</span></span>
<span><span class="co">#&gt; $ Edot    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.0006684719, 0.0037880073, 0.0102033866, 0.0578191910, 0.0226…</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="human-muscle-work">Human Muscle Work<a class="anchor" aria-label="anchor" href="#human-muscle-work"></a>
</h3>
<p>Raw data for the estimation of human muscle work is obtained from the
International Labor Organisation (ILO), via the <code>R</code> package
<code>Rilostat</code> as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ilo_working_hours_data</span> <span class="op">&lt;-</span> <span class="fu">Rilostat</span><span class="fu">::</span><span class="fu"><a href="https://dbescond.github.io/Rilostat/reference/get_ilostat.html" class="external-link">get_ilostat</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu">MWTools</span><span class="fu">::</span><span class="va"><a href="../reference/ilo_codes.html">ilo_codes</a></span><span class="op">$</span><span class="va">working_hours_code</span>,</span>
<span>                                                quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">Rilostat</span><span class="fu">::</span><span class="fu"><a href="https://dbescond.github.io/Rilostat/reference/label_ilostat.html" class="external-link">label_ilostat</a></span><span class="op">(</span>code <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ref_area"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ilo_employment_data</span> <span class="op">&lt;-</span> <span class="fu">Rilostat</span><span class="fu">::</span><span class="fu"><a href="https://dbescond.github.io/Rilostat/reference/get_ilostat.html" class="external-link">get_ilostat</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu">MWTools</span><span class="fu">::</span><span class="va"><a href="../reference/ilo_codes.html">ilo_codes</a></span><span class="op">$</span><span class="va">employment_code</span>,</span>
<span>                                             quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">Rilostat</span><span class="fu">::</span><span class="fu"><a href="https://dbescond.github.io/Rilostat/reference/label_ilostat.html" class="external-link">label_ilostat</a></span><span class="op">(</span>code <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ref_area"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Using data for the number of employed persons and mean yearly working
hours the primary, final, and useful energy associated with human muscle
work can be estimated using the helper function
<code><a href="../reference/calc_hmw_pfu.html">MWTools::calc_hmw_pfu</a></code> as below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ilo_working_hours_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu">MWTools</span><span class="fu">::</span><span class="fu"><a href="../reference/ilo_working_hours_test_data_path.html">ilo_working_hours_test_data_path</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ilo_employment_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu">MWTools</span><span class="fu">::</span><span class="fu"><a href="../reference/ilo_employment_test_data_path.html">ilo_employment_test_data_path</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">preparedILOData</span> <span class="op">&lt;-</span> <span class="fu">MWTools</span><span class="fu">::</span><span class="fu"><a href="../reference/prepareRawILOData.html">prepareRawILOData</a></span><span class="op">(</span>ilo_working_hours_data <span class="op">=</span> <span class="va">ilo_working_hours_data</span>,</span>
<span>                                              ilo_employment_data <span class="op">=</span> <span class="va">ilo_employment_data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">hmw_pfu_data</span> <span class="op">&lt;-</span> <span class="fu">MWTools</span><span class="fu">::</span><span class="fu"><a href="../reference/calc_hmw_pfu.html">calc_hmw_pfu</a></span><span class="op">(</span>.df <span class="op">=</span> <span class="va">preparedILOData</span>,</span>
<span>                                      concordance_path <span class="op">=</span> <span class="fu">MWTools</span><span class="fu">::</span><span class="fu"><a href="../reference/fao_concordance_path.html">fao_concordance_path</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                      hmw_analysis_data_path <span class="op">=</span> <span class="fu">MWTools</span><span class="fu">::</span><span class="fu"><a href="../reference/hmw_analysis_data_path.html">hmw_analysis_data_path</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">hmw_pfu_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1,098</span></span>
<span><span class="co">#&gt; Columns: 7</span></span>
<span><span class="co">#&gt; $ Country <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "GBR", "GBR", "GBR", "GBR", "GBR", "GBR", "GBR", "GBR", "GBR",…</span></span>
<span><span class="co">#&gt; $ Year    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1960, 1960, 1960, 1960, 1960, 1960, 1960, 1960, 1960, 1960, 19…</span></span>
<span><span class="co">#&gt; $ Species <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Human females", "Human females", "Human females", "Human fema…</span></span>
<span><span class="co">#&gt; $ Stage   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Final", "Final", "Final", "Primary", "Primary", "Primary", "U…</span></span>
<span><span class="co">#&gt; $ Sector  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Agriculture", "Industry", "Services", "Agriculture", "Industr…</span></span>
<span><span class="co">#&gt; $ Unit    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "EJ", "EJ", "EJ", "EJ", "EJ", "EJ", "EJ", "EJ", "EJ", "EJ", "E…</span></span>
<span><span class="co">#&gt; $ Edot    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 8.681814e-04, 1.539860e-02, 2.819406e-02, 1.400293e-03, 2.4836…</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="psut-matrices">PSUT matrices<a class="anchor" aria-label="anchor" href="#psut-matrices"></a>
</h3>
<p>PFU data can be converted to PSUT matrices using
<code><a href="../reference/prep_psut.html">prep_psut()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mw_psut</span> <span class="op">&lt;-</span> <span class="fu">MWTools</span><span class="fu">::</span><span class="fu"><a href="../reference/prep_psut.html">prep_psut</a></span><span class="op">(</span>.hmw_df <span class="op">=</span> <span class="va">hmw_pfu_data</span>,</span>
<span>                              .amw_df <span class="op">=</span> <span class="va">amw_pfu_data</span><span class="op">)</span></span>
<span><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">mw_psut</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 248</span></span>
<span><span class="co">#&gt; Columns: 13</span></span>
<span><span class="co">#&gt; $ Country    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "CHNM", "CHNM", "CHNM", "CHNM", "CHNM", "CHNM", "CHNM", "CH…</span></span>
<span><span class="co">#&gt; $ Year       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1960, 1960, 1961, 1961, 1962, 1962, 1963, 1963, 1964, 1964,…</span></span>
<span><span class="co">#&gt; $ Method     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "PCM", "PCM", "PCM", "PCM", "PCM", "PCM", "PCM", "PCM", "PC…</span></span>
<span><span class="co">#&gt; $ EnergyType <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "E", "E", "E", "E", "E", "E", "E", "E", "E", "E", "E", "E",…</span></span>
<span><span class="co">#&gt; $ LastStage  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Final", "Useful", "Final", "Useful", "Final", "Useful", "F…</span></span>
<span><span class="co">#&gt; $ R          <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;matrix[1 x 1]&gt;, &lt;matrix[1 x 1]&gt;, &lt;matrix[1 x 1]&gt;, &lt;matrix…</span></span>
<span><span class="co">#&gt; $ U          <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;&lt;matrix[2 x 2]&gt;&gt;, &lt;&lt;matrix[3 x 14]&gt;&gt;, &lt;&lt;matrix[2 x 2]&gt;&gt;, …</span></span>
<span><span class="co">#&gt; $ V          <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;&lt;matrix[2 x 2]&gt;&gt;, &lt;&lt;matrix[14 x 14]&gt;&gt;, &lt;&lt;matrix[2 x 2]&gt;&gt;,…</span></span>
<span><span class="co">#&gt; $ Y          <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;&lt;matrix[1 x 2]&gt;&gt;, &lt;&lt;matrix[12 x 2]&gt;&gt;, &lt;&lt;matrix[1 x 2]&gt;&gt;, …</span></span>
<span><span class="co">#&gt; $ S_units    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;&lt;matrix[2 x 1]&gt;&gt;, &lt;&lt;matrix[4 x 1]&gt;&gt;, &lt;&lt;matrix[2 x 1]&gt;&gt;, &lt;…</span></span>
<span><span class="co">#&gt; $ U_feed     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;&lt;matrix[2 x 2]&gt;&gt;, &lt;&lt;matrix[3 x 14]&gt;&gt;, &lt;&lt;matrix[2 x 2]&gt;&gt;, …</span></span>
<span><span class="co">#&gt; $ U_EIOU     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;&lt;matrix[2 x 2]&gt;&gt;, &lt;&lt;matrix[3 x 14]&gt;&gt;, &lt;&lt;matrix[2 x 2]&gt;&gt;, …</span></span>
<span><span class="co">#&gt; $ r_EIOU     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;&lt;matrix[2 x 2]&gt;&gt;, &lt;&lt;matrix[3 x 14]&gt;&gt;, &lt;&lt;matrix[2 x 2]&gt;&gt;, …</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>The functions in the <code>MWTools</code> package can streamline and
assist inclusion of animal and human muscle work in societal exergy
analysis.</p>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Heun:2018" class="csl-entry">
Heun, Matthew Kuperus, Anne Owen, and Paul E. Brockway. 2018. <span>“A
Physical Supply-Use Table Framework for Energy Analysis on the Energy
Conversion Chain.”</span> <em>Applied Energy</em> 226 (September):
1134–62. <a href="https://doi.org/10.1016/j.apenergy.2018.05.109" class="external-link">https://doi.org/10.1016/j.apenergy.2018.05.109</a>.
</div>
<div id="ref-Steenwyk:2022ww" class="csl-entry">
Steenwyk, Paul, Matthew Kuperus Heun, Paul Brockway, Tânia Sousa, and
Sofia Henriques. 2022. <span>“The Contributions of Muscle and Machine
Work to Land and Labor Productivity in World Agriculture Since
1800.”</span> <em>Biophysical Economics and Sustainability</em> 7 (2):
1–17. <a href="https://doi.org/10.1007/s41247-022-00096-z" class="external-link">https://doi.org/10.1007/s41247-022-00096-z</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Zeke Marshall, Matthew Heun.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
